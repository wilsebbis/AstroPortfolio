---
import { roles } from "../data/roles";
---

<section class="relative w-full py-24 overflow-hidden">
    <div class="mx-auto max-w-6xl px-6">
        <h2 class="text-4xl font-extrabold tracking-tight text-white/95 reveal">
            Roles Interested In
        </h2>

        <div
            class="mt-12 grid gap-8 lg:grid-cols-[1fr_400px] lg:items-start reveal stagger-1"
        >
            <!-- Typewriter area -->
            <div
                class="rounded-2xl bg-white/5 p-8 ring-1 ring-white/10 backdrop-blur-xl shadow-2xl"
            >
                <div
                    class="text-xs font-bold tracking-[0.3em] text-teal-400/90 uppercase"
                >
                    Skills & Competencies
                </div>
                <div class="mt-4">
                    <span
                        class="text-3xl font-bold text-white/95"
                        id="roleTitleLive"></span>
                </div>
                <div
                    class="mt-4 text-xl text-white/80 font-mono leading-relaxed min-h-[3.5rem]"
                >
                    <span id="typewriterText"></span><span
                        class="animate-pulse text-teal-400">▍</span
                    >
                </div>
            </div>

            <!-- Carousel Container -->
            <div class="relative overflow-visible">
                <div
                    id="rolesCarousel"
                    class="flex w-full gap-6 overflow-x-auto pb-8 snap-x snap-mandatory scroll-px-6 hide-scrollbar cursor-grab active:cursor-grabbing"
                >
                    {
                        roles.map((r) => (
                            <article
                                class="role-card snap-start shrink-0 w-[85vw] sm:w-[520px] lg:w-[400px]
                      rounded-2xl bg-white/5 p-8 ring-1 ring-white/10 backdrop-blur-md
                      transition-all duration-500 ease-out opacity-85 group"
                                data-role-id={r.id}
                                data-role-title={r.title}
                                data-role-skills={r.skillsLine}
                                data-role-highlight={r.highlightClass}
                            >
                                <h3 class="text-2xl font-bold text-white/95 group-hover:text-white transition-colors">
                                    {r.title}
                                </h3>
                                <p class="mt-3 text-white/60 text-lg leading-snug">
                                    Applied systems, shipping-oriented work, and
                                    measurable outcomes.
                                </p>

                                <div class="mt-8 flex flex-wrap gap-2">
                                    {r.skillsLine
                                        .split("·")
                                        .slice(0, 4)
                                        .map((s) => (
                                            <span class="rounded-full bg-white/5 px-4 py-1.5 text-sm font-medium text-white/70 ring-1 ring-white/10 transition-colors group-hover:bg-white/10">
                                                {s.trim()}
                                            </span>
                                        ))}
                                </div>
                            </article>
                        ))
                    }
                    <!-- Spacer for scroll padding -->
                    <div class="shrink-0 w-6"></div>
                </div>

                <!-- Subtle gradient overlays for scroll depth -->
                <div
                    class="absolute inset-y-0 -left-4 w-12 bg-gradient-to-r from-zinc-950 to-transparent pointer-events-none lg:hidden"
                >
                </div>
                <div
                    class="absolute inset-y-0 -right-4 w-12 bg-gradient-to-l from-zinc-950 to-transparent pointer-events-none lg:hidden"
                >
                </div>
            </div>
        </div>
    </div>

    <script src="../scripts/roles-carousel.ts"></script>
</section>

<style>
    .hide-scrollbar {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Smooth scaling for active card */
    .role-card.scale-\[1.01\] {
        transform: scale(1.01);
    }
</style>
